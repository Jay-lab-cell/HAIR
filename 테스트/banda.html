<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>헤어스타일 비포/애프터 비교</title>
    <style>
        /* 페이지 기본 스타일 */
        body {
            font-family: 'Pretendard', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
            margin: 0;
        }

        /* 슬라이더 컨테이너 */
        .container {
            position: relative;
            width: 100%;
            max-width: 600px; /* 원하는 크기로 조절 가능 */
            /* 이미지 비율(3:4)에 맞춰 aspect-ratio 설정 */
            aspect-ratio: 3 / 4;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        /* 공통 이미지 스타일 */
        .img-box {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 이미지가 찌그러지지 않게 꽉 채움 */
            display: block;
        }

        /* Before 이미지 (위쪽 레이어) */
        .img-box.before {
            width: 50%; /* 초기값 */
            z-index: 2;
            overflow: hidden; /* 잘리는 효과의 핵심 */
            border-right: 3px solid #fff; /* 경계선 */
        }
        
        /* Before 내부 이미지가 찌그러지지 않게 고정 */
        .img-box.before img {
            /* 컨테이너 너비와 동일하게 설정하여 잘려보이게 함 */
            width: 600px; 
            max-width: none; /* 반응형에서 이미지 크기 줄어듦 방지 */
        }

        /* After 이미지 (아래쪽 레이어) */
        .img-box.after {
            z-index: 1;
        }

        /* 슬라이더 핸들 (range input 커스터마이징) */
        .slider {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            opacity: 0;
            cursor: col-resize; /* 마우스 커서 변경 */
            margin: 0;
        }

        /* 핸들 중앙 아이콘 */
        .handle-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            z-index: 3;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            pointer-events: none; /* 클릭 통과 */
        }

        .handle-icon::before {
            content: "↔";
            color: #333;
            font-weight: bold;
        }

        /* 라벨 (Before/After 텍스트) */
        .label {
            position: absolute;
            top: 20px;
            padding: 5px 10px;
            background: rgba(0,0,0,0.6);
            color: white;
            border-radius: 5px;
            font-size: 14px;
            z-index: 5;
            pointer-events: none;
        }
        .label.before-txt { left: 20px; }
        .label.after-txt { right: 20px; }

    </style>
</head>
<body>

    <div class="container" id="comparisonContainer">
        <div class="img-box after">
            <img src="C:\Users\JD\Desktop\AI 프로젝트\HAIR\테스트\after2.jpg" alt="After (가르마펌 스타일)">
        </div>

        <div class="img-box before" id="beforeImageWrapper">
            <img src="C:\Users\JD\Desktop\AI 프로젝트\HAIR\테스트\before.jpg" alt="Before (원본 스타일)" id="beforeImage">
        </div>

        <input type="range" min="0" max="100" value="50" class="slider" id="sliderInput">
        
        <div class="handle-icon" id="handleIcon"></div>

        <span class="label before-txt">Before</span>
        <span class="label after-txt">After</span>
    </div>

    <script>
        const container = document.getElementById('comparisonContainer');
        const sliderInput = document.getElementById('sliderInput');
        const beforeWrapper = document.getElementById('beforeImageWrapper');
        const beforeImg = document.getElementById('beforeImage');
        const handleIcon = document.getElementById('handleIcon');

        // 슬라이더 움직임 이벤트
        sliderInput.addEventListener('input', (e) => {
            const sliderValue = e.target.value;
            
            // 1. Before 이미지 영역 너비 조절
            beforeWrapper.style.width = sliderValue + "%";
            
            // 2. 핸들 아이콘 위치 조절
            handleIcon.style.left = sliderValue + "%";
        });

        // 반응형 처리: Before 내부 이미지가 잘리지 않고 위치를 유지하도록 너비 동기화
        function adjustImageWidth() {
            const containerWidth = container.offsetWidth;
            beforeImg.style.width = containerWidth + 'px';
        }

        // 초기 실행 및 창 크기 조절 시 실행
        window.addEventListener('resize', adjustImageWidth);
        // 이미지 로딩 후 정확한 너비 계산을 위해 onload 이벤트 사용
        beforeImg.onload = adjustImageWidth;
        // 캐시된 이미지를 대비해 즉시 실행도 포함
        adjustImageWidth();
    </script>
</body>
</html>